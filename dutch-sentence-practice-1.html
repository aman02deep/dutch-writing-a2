<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Inburgering A2 Mastery - Enhanced Rules</title>
    <style>
        :root { --primary: #0052cc; --danger: #d92626; --easy: #2e7d32; --med: #ef6c00; --hard: #c62828; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* Left Sidebar */
        #nav-sidebar { width: 220px; background: white; border-right: 1px solid #ddd; display: flex; flex-direction: column; transition: 0.3s; z-index: 10; }
        #nav-sidebar.collapsed { width: 0; overflow: hidden; border: none; }
        .jump-links { padding: 15px; display: flex; flex-direction: column; gap: 8px; border-bottom: 1px solid #eee; }
        .jump-btn { padding: 8px; border: none; border-radius: 4px; font-size: 0.75rem; cursor: pointer; font-weight: bold; color: white; }
        .btn-e { background: var(--easy); } .btn-m { background: var(--med); } .btn-h { background: var(--hard); }
        .scroll-area { flex-grow: 1; overflow-y: auto; padding: 10px; }
        .nav-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
        .nav-item { padding: 10px 0; text-align: center; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; font-size: 0.8rem; background: #fff; }
        .nav-item.active { border: 2px solid var(--primary); font-weight: bold; }
        .nav-item.is-correct { background: #c8e6c9; border-color: #2e7d32; }
        .nav-item.is-wrong { background: #ffcdd2; border-color: #c62828; }

        /* Main Area */
        .workspace { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }
        .top-bar { padding: 12px 20px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between; }
        .top-left { display: flex; align-items: center; gap: 15px; }
        .top-right { display: flex; align-items: center; gap: 10px; }

        .difficulty-badge { padding: 4px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        .easy { background: #e8f5e9; color: var(--easy); }
        .medium { background: #fff3e0; color: var(--med); }
        .hard { background: #ffebee; color: var(--hard); }

        .app-content { display: flex; gap: 20px; padding: 30px; overflow-y: auto; justify-content: center; }
        .app-container { background: white; width: 100%; max-width: 800px; padding: 40px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-top: 8px solid var(--danger); height: fit-content; }
        
        .translation { font-size: 1.6rem; font-weight: bold; color: #1a1a1a; text-align: center; margin-bottom: 30px; line-height: 1.4; }
        .drop-zone { min-height: 80px; border: 2px dashed var(--primary); border-radius: 10px; display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; background: #f9fbff; margin-bottom: 20px; }
        .word-bank { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .word { padding: 12px 18px; background: white; border: 2px solid var(--primary); color: var(--primary); border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        #writing-input { width: 100%; padding: 15px; font-size: 1.2rem; border: 2px solid #ccc; border-radius: 8px; display: none; margin-bottom: 30px; box-sizing: border-box; }

        /* Rule Box Enhancement */
        #rule-box { 
            display: none; 
            padding: 20px; 
            background: #fff9c4; 
            border-left: 6px solid #fbc02d; 
            margin-bottom: 25px; 
            font-size: 0.95rem; 
            border-radius: 4px;
            color: #444;
        }
        .rule-title { font-weight: bold; color: #856404; margin-bottom: 8px; display: block; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.5px;}
        .rule-formula { background: rgba(255,255,255,0.5); padding: 8px; border-radius: 4px; font-family: monospace; display: block; margin: 10px 0; color: #000; font-size: 1rem; }
        .rule-example { font-style: italic; color: #555; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 8px; display: block; }

        .vocab-sidebar { width: 300px; background: #333; color: white; padding: 20px; border-radius: 12px; height: fit-content; max-height: 80vh; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid #555; }
        
        .btn-main { padding: 15px; background: var(--danger); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-sec { padding: 8px 15px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem; }
        .btn-rule-toggle { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; font-weight: bold; }
    </style>
</head>
<body>

    <aside id="nav-sidebar">
        <div class="jump-links">
            <button class="jump-btn btn-e" onclick="jumpTo(0)">üü¢ Start Easy</button>
            <button class="jump-btn btn-m" onclick="jumpTo(30)">üü† Start Medium</button>
            <button class="jump-btn btn-h" onclick="jumpTo(60)">üî¥ Start Hard</button>
        </div>
        <div class="scroll-area"><div class="nav-grid" id="nav-grid"></div></div>
    </aside>

    <main class="workspace">
        <div class="top-bar">
            <div class="top-left">
                <button class="btn-sec" onclick="toggleSidebar()">‚ò∞ List</button>
                <div id="diff-label" class="difficulty-badge easy">Easy</div>
                <div id="header-progress" style="font-weight: bold; color: #555;">1 of 100</div>
            </div>
            <div class="top-right">
                <button class="btn-rule-toggle" onclick="toggleRule()">View Rule</button>
                <button class="btn-sec" onclick="toggleMode()">Mode: <span id="mode-text">Blocks</span></button>
            </div>
        </div>

        <div class="app-content">
            <div class="app-container">
                <div class="translation" id="translation">Loading...</div>
                
                <div id="block-area">
                    <div class="drop-zone" id="answer-zone" onclick="returnToBank(event)"></div>
                    <div class="word-bank" id="word-bank"></div>
                </div>
                <input type="text" id="writing-input" placeholder="Typ de Nederlandse zin hier...">

                <div id="rule-box">
                    <span class="rule-title">Grammar Logic</span>
                    <div id="rule-text"></div>
                    <div class="rule-formula" id="rule-formula"></div>
                    <div class="rule-example" id="rule-example"></div>
                </div>

                <div id="feedback" style="text-align:center; font-weight:bold; height:24px; margin-bottom:15px;"></div>

                <div style="display:flex; flex-direction:column; gap:12px;">
                    <button class="btn-main" onclick="checkAnswer()">Check Answer</button>
                    <div style="display:flex; gap:10px;">
                        <button class="btn-sec" style="flex:1" onclick="prev()">Previous</button>
                        <button class="btn-sec" style="flex:1" onclick="next()">Next</button>
                    </div>
                </div>
            </div>

            <div class="vocab-sidebar">
                <h4 style="margin-top:0; border-bottom: 1px solid #666; padding-bottom: 10px;">Verb Library</h4>
                <table>
                    <thead><tr><th>Dutch</th><th>English</th><th>Past Form</th></tr></thead>
                    <tbody id="verb-list"></tbody>
                </table>
            </div>
        </div>
    </main>

 <script>
       const questions = [
    // --- EASY (1-30): BASIC S-V-O & POSSESSION ---
    { 
        diff: 'easy', eng: "I need a pen.", dut: "Ik heb een pen nodig.", 
        logic: "To express a 'need' with 'hebben', the word 'nodig' must go at the absolute end.",
        formula: "Subject + hebben + Object + NODIG",
        example: "Ik heb hulp nodig.",
        words: ["Ik", "heb", "een", "pen", "nodig."], verb: ["nodig hebben", "to need", "had nodig"] 
    },
    { 
        diff: 'easy', eng: "My car is red.", dut: "Mijn auto is rood.", 
        logic: "Standard word order for simple descriptions.",
        formula: "Subject + Verb + Adjective",
        example: "De tafel is groot.",
        words: ["Mijn", "auto", "is", "rood."], verb: ["zijn", "to be", "was"] 
    },
    { 
        diff: 'easy', eng: "I'm really sorry!", dut: "Het spijt me echt!", 
        logic: "Informal apology using 'me' as the object.",
        formula: "Het spijt + me + echt",
        example: "Het spijt me zeer.",
        words: ["Het", "spijt", "me", "echt!"], verb: ["spijten", "to be sorry", "speet"] 
    },
    { 
        diff: 'easy', eng: "His dog is sleeping.", dut: "Zijn hond slaapt.", 
        logic: "Possessive pronouns (Zijn/Haar) don't change standard word order.",
        formula: "Possessive + Noun + Verb",
        example: "Haar kat loopt.",
        words: ["Zijn", "hond", "slaapt."], verb: ["slapen", "to sleep", "sliep"] 
    },
    { 
        diff: 'easy', eng: "I am happy.", dut: "Ik ben blij.", 
        logic: "Use 'zijn' to describe emotions.",
        formula: "Ik + ben + Adjective",
        example: "Ik ben moe.",
        words: ["Ik", "ben", "blij."], verb: ["zijn", "to be", "was"] 
    },
    { 
        diff: 'easy', eng: "I have a new bike.", dut: "Ik heb een nieuwe fiets.", 
        logic: "Adjectives like 'nieuwe' come before the noun.",
        formula: "Subject + hebben + Adjective + Noun",
        example: "Ik heb een groot huis.",
        words: ["Ik", "heb", "een", "nieuwe", "fiets."], verb: ["hebben", "to have", "had"] 
    },
    { 
        diff: 'easy', eng: "The baby is sleeping.", dut: "De baby slaapt.", 
        logic: "Simple present tense for singular subjects.",
        formula: "Subject + Verb(stam+t)",
        example: "De man werkt.",
        words: ["De", "baby", "slaapt."], verb: ["slapen", "to sleep", "sliep"] 
    },
    { 
        diff: 'easy', eng: "We cook dinner.", dut: "Wij koken het avondeten.", 
        logic: "Plural subjects use the full verb (infinitive).",
        formula: "Plural Subject + Verb(infinitive)",
        example: "Zij spelen buiten.",
        words: ["Wij", "koken", "het", "avondeten."], verb: ["koken", "to cook", "gekookt"] 
    },
    { 
        diff: 'easy', eng: "I am in the supermarket.", dut: "Ik ben in de supermarkt.", 
        logic: "Location follows the finite verb.",
        formula: "Subject + Verb + Place",
        example: "Ik ben op school.",
        words: ["Ik", "ben", "in", "de", "supermarkt."], verb: ["zijn", "to be", "was"] 
    },
    { 
        diff: 'easy', eng: "The children are playing.", dut: "De kinderen spelen.", 
        logic: "Plural nouns take the plural verb form.",
        formula: "Plural Subject + Verb(infinitive)",
        example: "De mensen praten.",
        words: ["De", "kinderen", "spelen."], verb: ["spelen", "to play", "gespeeld"] 
    },
    // Adding more Easy questions to reach 30...
    { diff: 'easy', eng: "I speak Dutch.", dut: "Ik spreek Nederlands.", logic: "Basic S-V-O.", formula: "Subj + Verb + Obj", words: ["Ik", "spreek", "Nederlands."], verb: ["spreken", "to speak", "sprak"] },
    { diff: 'easy', eng: "Your house is big.", dut: "Jouw huis is groot.", logic: "Possessive pronoun usage.", formula: "Possessive + Noun + is + Adj", words: ["Jouw", "huis", "is", "groot."], verb: ["zijn", "to be", "is"] },
    { diff: 'easy', eng: "I look for my keys.", dut: "Ik zoek mijn sleutels.", logic: "Standard main clause.", formula: "Subj + Verb + Obj", words: ["Ik", "zoek", "mijn", "sleutels."], verb: ["zoeken", "to search", "zocht"] },
    { diff: 'easy', eng: "I visit my family.", dut: "Ik bezoek mijn familie.", logic: "Standard main clause.", formula: "Subj + Verb + Obj", words: ["Ik", "bezoek", "mijn", "familie."], verb: ["bezoeken", "to visit", "bezocht"] },
    { diff: 'easy', eng: "The water is cold.", dut: "Het water is koud.", logic: "Simple description.", formula: "Subj + is + Adj", words: ["Het", "water", "is", "koud."], verb: ["zijn", "to be", "was"] },
    { diff: 'easy', eng: "He drinks tea.", dut: "Hij drinkt thee.", logic: "Singular present tense.", formula: "Subj + Verb(t)", words: ["Hij", "drinkt", "thee."], verb: ["drinken", "to drink", "dronk"] },
    { diff: 'easy', eng: "I eat an apple.", dut: "Ik eet een appel.", logic: "Simple present.", formula: "Subj + Verb + Obj", words: ["Ik", "eet", "een", "appel."], verb: ["eten", "to eat", "at"] },
    { diff: 'easy', eng: "She has a dog.", dut: "Zij heeft een hond.", logic: "Possession with 'heeft'.", formula: "Subj + heeft + Obj", words: ["Zij", "heeft", "een", "hond."], verb: ["hebben", "to have", "had"] },
    { diff: 'easy', eng: "We read a book.", dut: "Wij lezen een boek.", logic: "Plural subject.", formula: "Subj + Verb(inf)", words: ["Wij", "lezen", "een", "boek."], verb: ["lezen", "to read", "las"] },
    { diff: 'easy', eng: "I write a letter.", dut: "Ik schrijf een brief.", logic: "Simple present.", formula: "Subj + Verb + Obj", words: ["Ik", "schrijf", "een", "brief."], verb: ["schrijven", "to write", "schreef"] },
    { diff: 'easy', eng: "The sun is shining.", dut: "De zon schijnt.", logic: "Simple description.", formula: "Subj + Verb", words: ["De", "zon", "schijnt."], verb: ["schijnen", "to shine", "scheen"] },
    { diff: 'easy', eng: "I am a student.", dut: "Ik ben een student.", logic: "Identity with 'zijn'.", formula: "Subj + ben + Noun", words: ["Ik", "ben", "een", "student."], verb: ["zijn", "to be", "was"] },
    { diff: 'easy', eng: "He is a doctor.", dut: "Hij is een arts.", logic: "Identity.", formula: "Subj + is + Noun", words: ["Hij", "is", "een", "arts."], verb: ["zijn", "to be", "was"] },
    { diff: 'easy', eng: "We are friends.", dut: "Wij zijn vrienden.", logic: "Plural identity.", formula: "Subj + zijn + Noun", words: ["Wij", "zijn", "vrienden."], verb: ["zijn", "to be", "waren"] },
    { diff: 'easy', eng: "I love music.", dut: "Ik hou van muziek.", logic: "Fixed preposition 'houden van'.", formula: "Subj + hou + van + Obj", words: ["Ik", "hou", "van", "muziek."], verb: ["houden van", "to love", "hield van"] },
    { diff: 'easy', eng: "She likes coffee.", dut: "Zij houdt van koffie.", logic: "Fixed preposition 'houdt van'.", formula: "Subj + houdt + van + Obj", words: ["Zij", "houdt", "van", "koffie."], verb: ["houden van", "to love", "hield van"] },
    { diff: 'easy', eng: "I go to school.", dut: "Ik ga naar school.", logic: "Motion with 'naar'.", formula: "Subj + Verb + naar + Place", words: ["Ik", "ga", "naar", "school."], verb: ["gaan", "to go", "ging"] },
    { diff: 'easy', eng: "They live here.", dut: "Zij wonen hier.", logic: "Plural subject.", formula: "Subj + Verb + Place", words: ["Zij", "wonen", "hier."], verb: ["wonen", "to live", "woonde"] },
    { diff: 'easy', eng: "It is warm.", dut: "Het is warm.", logic: "Weather/state.", formula: "Het + is + Adj", words: ["Het", "is", "warm."], verb: ["zijn", "to be", "was"] },
    { diff: 'easy', eng: "I see a bird.", dut: "Ik zie een vogel.", logic: "Simple present.", formula: "Subj + Verb + Obj", words: ["Ik", "zie", "een", "vogel."], verb: ["zien", "to see", "zag"] },

    // --- MEDIUM (31-60): INVERSION & MODALS ---
    { 
        diff: 'medium', eng: "Tomorrow I work.", dut: "Morgen werk ik.", 
        logic: "If you start with Time, the Verb and Subject swap. The Verb must be in position 2.",
        formula: "Time + Verb + Subject",
        example: "Vandaag ga ik.",
        words: ["Morgen", "werk", "ik."], verb: ["werken", "to work", "werkte"] 
    },
    { 
        diff: 'medium', eng: "Then I go home.", dut: "Dan ga ik naar huis.", 
        logic: "The word 'Dan' (Then) always triggers inversion.",
        formula: "Dan + Verb + Subject + Rest",
        example: "Dan kom ik.",
        words: ["Dan", "ga", "ik", "naar", "huis."], verb: ["gaan", "to go", "ging"] 
    },
    { 
        diff: 'medium', eng: "I must study tomorrow.", dut: "Ik moet morgen studeren.", 
        logic: "Modal verbs stay in position 2 and kick the main verb to the very end.",
        formula: "Subject + Modal + Time + Infinitive",
        example: "Ik wil nu slapen.",
        words: ["Ik", "moet", "morgen", "studeren."], verb: ["moeten", "must", "moest"] 
    },
    { 
        diff: 'medium', eng: "Can you help me?", dut: "Kun jij mij helpen?", 
        logic: "In questions, the verb moves to position 1.",
        formula: "Verb + Subject + Object + Infinitive",
        example: "Wil jij thee?",
        words: ["Kun", "jij", "mij", "helpen?"], verb: ["kunnen", "can", "kon"] 
    },
    { 
        diff: 'medium', eng: "I am cooking right now.", dut: "Ik ben aan het koken.", 
        logic: "Use 'aan het' for continuous actions.",
        formula: "Subject + zijn + aan het + Infinitive",
        example: "Hij is aan het werken.",
        words: ["Ik", "ben", "aan", "het", "koken."], verb: ["koken", "to cook", "kookte"] 
    },
    { 
        diff: 'medium', eng: "I want to buy a jacket.", dut: "Ik wil graag een jas kopen.", 
        logic: "'Graag' expresses a polite wish and follows the finite verb.",
        formula: "Subject + Modal + graag + Object + Infinitive",
        example: "Ik wil graag eten.",
        words: ["Ik", "wil", "graag", "een", "jas", "kopen."], verb: ["willen", "to want", "wilde"] 
    },
    { 
        diff: 'medium', eng: "We agree at 10 o'clock.", dut: "Wij spreken om 10 uur af.", 
        logic: "Separable verbs: the prefix moves to the absolute end of the clause.",
        formula: "Subject + Verb(stem) + Time + Prefix",
        example: "Ik bel je op.",
        words: ["Wij", "spreken", "om", "10", "uur", "af."], verb: ["afspreken", "to agree", "sprak af"] 
    },
    { 
        diff: 'medium', eng: "I call you tomorrow.", dut: "Ik bel je morgen op.", 
        logic: "Separable verb 'opbellen' splits.",
        formula: "Subject + Verb + Obj + Time + Prefix",
        example: "Hij ruimt op.",
        words: ["Ik", "bel", "je", "morgen", "op."], verb: ["opbellen", "to call", "belde op"] 
    },
    { 
        diff: 'medium', eng: "Why are you drinking milk?", dut: "Waarom drink jij de melk?", 
        logic: "Question words are followed by Verb + Subject.",
        formula: "Question Word + Verb + Subject + Obj",
        example: "Wat eet jij?",
        words: ["Waarom", "drink", "jij", "de", "melk?"], verb: ["drinken", "to drink", "dronk"] 
    },
    { diff: 'medium', eng: "Every day I walk.", dut: "Elke dag wandel ik.", logic: "Time inversion.", formula: "Time + Verb + Subj", words: ["Elke", "dag", "wandel", "ik."], verb: ["wandelen", "to walk", "wandelde"] },
    { diff: 'medium', eng: "Where do you live?", dut: "Waar woon jij?", logic: "Question inversion.", formula: "Question + Verb + Subj", words: ["Waar", "woon", "jij?"], verb: ["wonen", "to live", "woonde"] },
    { diff: 'medium', eng: "I can speak Dutch.", dut: "Ik kan Nederlands spreken.", logic: "Modal structure.", formula: "Subj + Modal + Obj + Inf", words: ["Ik", "kan", "Nederlands", "spreken."], verb: ["kunnen", "can", "kon"] },
    { diff: 'medium', eng: "You must eat now.", dut: "Jij moet nu eten.", logic: "Modal + Time.", formula: "Subj + Modal + Time + Inf", words: ["Jij", "moet", "nu", "eten."], verb: ["moeten", "must", "moest"] },
    { diff: 'medium', eng: "Tonight I watch TV.", dut: "Vanavond kijk ik televisie.", logic: "Time inversion.", formula: "Time + Verb + Subj", words: ["Vanavond", "kijk", "ik", "televisie."], verb: ["kijken", "to watch", "keek"] },
    { diff: 'medium', eng: "He is cleaning.", dut: "Hij is aan het opruimen.", logic: "Continuous with separable verb.", formula: "Subj + zijn + aan het + Inf", words: ["Hij", "is", "aan", "het", "opruimen."], verb: ["opruimen", "to clean", "ruimde op"] },
    { diff: 'medium', eng: "We want to go.", dut: "Wij willen graag gaan.", logic: "Polite modal.", formula: "Subj + Modal + graag + Inf", words: ["Wij", "willen", "graag", "gaan."], verb: ["willen", "to want", "wilde"] },
    { diff: 'medium', eng: "In the morning I drink tea.", dut: "'s Morgens drink ik thee.", logic: "Time phrase inversion.", formula: "Time + Verb + Subj", words: ["'s Morgens", "drink", "ik", "thee."], verb: ["drinken", "to drink", "dronk"] },
    { diff: 'medium', eng: "What is your name?", dut: "Wat is jouw naam?", logic: "Question structure.", formula: "Question + Verb + Subj", words: ["Wat", "is", "jouw", "naam?"], verb: ["zijn", "to be", "was"] },
    { diff: 'medium', eng: "How are you?", dut: "Hoe gaat het?", logic: "Fixed expression.", formula: "Question + Verb + Subj", words: ["Hoe", "gaat", "het?"], verb: ["gaan", "to go", "ging"] },
    { diff: 'medium', eng: "I am going to work.", dut: "Ik ga naar het werk.", logic: "Movement.", formula: "Subj + Verb + Place", words: ["Ik", "ga", "naar", "het", "werk."], verb: ["gaan", "to go", "ging"] },
    { diff: 'medium', eng: "When is the party?", dut: "Wanneer is het feest?", logic: "Question structure.", formula: "Question + Verb + Subj", words: ["Wanneer", "is", "het", "feest?"], verb: ["zijn", "to be", "was"] },
    { diff: 'medium', eng: "I have to work today.", dut: "Ik moet vandaag werken.", logic: "Modal + Time.", formula: "Subj + Modal + Time + Inf", words: ["Ik", "moet", "vandaag", "werken."], verb: ["moeten", "must", "moest"] },
    { diff: 'medium', eng: "Who is that?", dut: "Wie is dat?", logic: "Simple question.", formula: "Question + Verb + Subj", words: ["Wie", "is", "dat?"], verb: ["zijn", "to be", "was"] },
    { diff: 'medium', eng: "I like to dance.", dut: "Ik dans graag.", logic: "Adverb 'graag'.", formula: "Subj + Verb + graag", words: ["Ik", "dans", "graag."], verb: ["dansen", "to dance", "danste"] },
    { diff: 'medium', eng: "He sings beautifully.", dut: "Hij zingt mooi.", logic: "Adverb placement.", formula: "Subj + Verb + Adv", words: ["Hij", "zingt", "mooi."], verb: ["zingen", "to sing", "zong"] },
    { diff: 'medium', eng: "We play together.", dut: "Wij spelen samen.", logic: "Adverb placement.", formula: "Subj + Verb + Adv", words: ["Wij", "spelen", "samen."], verb: ["spelen", "to play", "gespeeld"] },
    { diff: 'medium', eng: "I am looking for a job.", dut: "Ik zoek een baan.", logic: "Direct object.", formula: "Subj + Verb + Obj", words: ["Ik", "zoek", "een", "baan."], verb: ["zoeken", "to search", "zocht"] },
    { diff: 'medium', eng: "She works at the hospital.", dut: "Zij werkt in het ziekenhuis.", logic: "Prepositional phrase.", formula: "Subj + Verb + Place", words: ["Zij", "werkt", "in", "het", "ziekenhuis."], verb: ["werken", "to work", "werkte"] },
    { diff: 'medium', eng: "I drink coffee in the morning.", dut: "Ik drink koffie in de ochtend.", logic: "Time placement.", formula: "Subj + Verb + Obj + Time", words: ["Ik", "drink", "koffie", "in", "de", "ochtend."], verb: ["drinken", "to drink", "dronk"] },
    { diff: 'medium', eng: "They are learning Dutch.", dut: "Zij zijn Nederlands aan het leren.", logic: "Continuous structure.", formula: "Subj + zijn + Obj + aan het + Inf", words: ["Zij", "zijn", "Nederlands", "aan", "het", "leren."], verb: ["leren", "to learn", "leerde"] },

    // --- HARD (61-100): CLAUSES & COMPLEX ORDER ---
    { 
        diff: 'hard', eng: "I stay home because I am sick.", dut: "Ik blijf thuis omdat ik ziek ben.", 
        logic: "'Omdat' introduces a subordinate clause, pushing the verb to the end.",
        formula: "Main Clause + OMDAT + Subject + Adjective + Verb",
        example: "Ik werk niet omdat ik moe ben.",
        words: ["Ik", "blijf", "thuis", "omdat", "ik", "ziek", "ben."], verb: ["blijven", "to stay", "bleef"] 
    },
    { 
        diff: 'hard', eng: "I go to the store to buy bread.", dut: "Ik ga naar de winkel om brood te kopen.", 
        logic: "Purpose Clause: 'om' + Object + 'te' + Infinitive.",
        formula: "Main Clause + om + Object + te + Infinitive",
        example: "Ik ga naar bed om te slapen.",
        words: ["Ik", "ga", "naar", "de", "winkel", "om", "brood", "te", "kopen."], verb: ["kopen", "to buy", "kocht"] 
    },
    { 
        diff: 'hard', eng: "I think that he is coming.", dut: "Ik denk dat hij komt.", 
        logic: "'Dat' kicker pushes the verb to the end of its clause.",
        formula: "Main Verb + DAT + Subject + Verb",
        example: "Ik hoop dat je wint.",
        words: ["Ik", "denk", "dat", "hij", "komt."], verb: ["denken", "to think", "dacht"] 
    },
    { 
        diff: 'hard', eng: "I learn Dutch because I want to live here.", dut: "Ik leer Nederlands omdat ik hier wil wonen.", 
        logic: "In an 'omdat' clause with a modal, both verbs go to the end.",
        formula: "Omdat + Subject + Place + Modal + Infinitive",
        example: "Omdat ik daar moet werken.",
        words: ["Ik", "leer", "Nederlands", "omdat", "ik", "hier", "wil", "wonen."], verb: ["wonen", "to live", "woonde"] 
    },
    { 
        diff: 'hard', eng: "Yesterday I went to the store to buy milk.", dut: "Gisteren ging ik naar de winkel om melk te kopen.", 
        logic: "Combines Inversion and Purpose clauses.",
        formula: "Time + Verb + Subject + Place + Purpose",
        example: "Morgen ga ik om te helpen.",
        words: ["Gisteren", "ging", "ik", "naar", "de", "winkel", "om", "melk", "te", "kopen."], verb: ["gaan", "to go", "ging"] 
    },
    { diff: 'hard', eng: "I return this because it is small.", dut: "Ik breng dit terug omdat het te klein is.", logic: "Separable verb + Omdat kicker.", formula: "Verb + Obj + Prefix + Omdat + Subj + Adj + Verb", words: ["Ik", "breng", "dit", "terug", "omdat", "het", "te", "klein", "is."], verb: ["terugbrengen", "to return", "bracht terug"] },
    { diff: 'hard', eng: "If it rains, I stay home.", dut: "Als het regent, blijf ik thuis.", logic: "Subordinate clause at start causes inversion in main clause.", formula: "Als + Subj + Verb, Verb + Subj", words: ["Als", "het", "regent,", "blijf", "ik", "thuis."], verb: ["regenen", "to rain", "regende"] },
    { diff: 'hard', eng: "I hope that you are well.", dut: "Ik hoop dat het goed met je gaat.", logic: "Fixed expression in dat-clause.", formula: "Subj + Verb + dat + Subj + Verb(end)", words: ["Ik", "hoop", "dat", "het", "goed", "met", "je", "gaat."], verb: ["gaan", "to go", "ging"] },
    { diff: 'hard', eng: "Can you tell me where the station is?", dut: "Kun jij mij vertellen waar het station is?", logic: "Indirect question kicker.", formula: "Modal + Subj + Obj + Inf + QuestionWord + Subj + Verb", words: ["Kun", "jij", "mij", "vertellen", "waar", "het", "station", "is?"], verb: ["vertellen", "to tell", "vertelde"] },
    { diff: 'hard', eng: "I go to work although I am tired.", dut: "Ik ga naar het werk, hoewel ik moe ben.", logic: "Hoewel kicker rule.", formula: "Main + hoewel + Subj + Adj + Verb", words: ["Ik", "ga", "naar", "het", "werk,", "hoewel", "ik", "moe", "ben."], verb: ["zijn", "to be", "ben"] },
    { diff: 'hard', eng: "He says that he is coming later.", dut: "Hij zegt dat hij later komt.", logic: "Dat-clause kicker.", formula: "Subj + Verb + dat + Subj + Time + Verb", words: ["Hij", "zegt", "dat", "hij", "later", "komt."], verb: ["komen", "to come", "kwam"] },
    { diff: 'hard', eng: "I am happy that you are here.", dut: "Ik ben blij dat jij hier bent.", logic: "Dat-clause kicker.", formula: "Subj + Verb + Adj + dat + Subj + Place + Verb", words: ["Ik", "ben", "blij", "dat", "jij", "hier", "bent."], verb: ["zijn", "to be", "bent"] },
    { diff: 'hard', eng: "Since I am sick, I stay home.", dut: "Omdat ik ziek ben, blijf ik thuis.", logic: "Omdat clause at start causes inversion.", formula: "Omdat + Subj + Adj + Verb, Verb + Subj", words: ["Omdat", "ik", "ziek", "ben,", "blijf", "ik", "thuis."], verb: ["blijven", "to stay", "bleef"] },
    { diff: 'hard', eng: "I drink water while I run.", dut: "Ik drink water terwijl ik ren.", logic: "Terwijl kicker rule.", formula: "Main + terwijl + Subj + Verb", words: ["Ik", "drink", "water", "terwijl", "ik", "ren."], verb: ["rennen", "to run", "rende"] },
    { diff: 'hard', eng: "He studies hard to pass the exam.", dut: "Hij studeert hard om voor het examen te slagen.", logic: "Complex Purpose clause.", formula: "Subj + Verb + Adv + om + Obj + te + Inf", words: ["Hij", "studeert", "hard", "om", "voor", "het", "examen", "te", "slagen."], verb: ["slagen", "to pass", "slaagde"] },
    { diff: 'hard', eng: "I want to know if you are coming.", dut: "Ik wil weten of jij komt.", logic: "Of kicker rule.", formula: "Subj + Modal + Inf + of + Subj + Verb", words: ["Ik", "wil", "weten", "of", "jij", "komt."], verb: ["komen", "to come", "kwam"] },
    { diff: 'hard', eng: "She asks why you are late.", dut: "Zij vraagt waarom jij te laat bent.", logic: "Indirect question kicker.", formula: "Subj + Verb + Question + Subj + Adj + Verb", words: ["Zij", "vraagt", "waarom", "jij", "te", "laat", "bent."], verb: ["zijn", "to be", "bent"] },
    { diff: 'hard', eng: "I don't know where he is.", dut: "Ik weet niet waar hij is.", logic: "Indirect question kicker.", formula: "Subj + Verb + niet + Question + Subj + Verb", words: ["Ik", "weet", "niet", "waar", "hij", "is."], verb: ["zijn", "to be", "is"] },
    { diff: 'hard', eng: "We eat when we are hungry.", dut: "Wij eten wanneer wij honger hebben.", logic: "Wanneer kicker rule.", formula: "Main + wanneer + Subj + Obj + Verb", words: ["Wij", "eten", "wanneer", "wij", "honger", "hebben."], verb: ["hebben", "to have", "hadden"] },
    { diff: 'hard', eng: "I wait until the bus comes.", dut: "Ik wacht totdat de bus komt.", logic: "Totdat kicker rule.", formula: "Main + totdat + Subj + Verb", words: ["Ik", "wacht", "totdat", "de", "bus", "komt."], verb: ["komen", "to come", "kwam"] },
    { diff: 'hard', eng: "I am going to the park if it is sunny.", dut: "Ik ga naar het park als de zon schijnt.", logic: "Als kicker rule.", formula: "Main + als + Subj + Verb", words: ["Ik", "ga", "naar", "het", "park", "als", "de", "zon", "schijnt."], verb: ["schijnen", "to shine", "scheen"] },
    { diff: 'hard', eng: "He works so that he can earn money.", dut: "Hij werkt zodat hij geld kan verdienen.", logic: "Zodat kicker with modal.", formula: "Main + zodat + Subj + Obj + Modal + Inf", words: ["Hij", "werkt", "zodat", "hij", "geld", "kan", "verdienen."], verb: ["verdienen", "to earn", "verdiende"] },
    { diff: 'hard', eng: "I go home because it is late.", dut: "Ik ga naar huis omdat het laat is.", logic: "Omdat kicker.", formula: "Main + omdat + Subj + Adj + Verb", words: ["Ik", "ga", "naar", "huis", "omdat", "het", "laat", "is."], verb: ["zijn", "to be", "is"] },
    { diff: 'hard', eng: "She says that she will call tomorrow.", dut: "Zij zegt dat zij morgen zal bellen.", logic: "Future kicker.", formula: "Subj + Verb + dat + Subj + Time + Modal + Inf", words: ["Zij", "zegt", "dat", "zij", "morgen", "zal", "bellen."], verb: ["bellen", "to call", "belde"] },
    { diff: 'hard', eng: "I am staying here until you come.", dut: "Ik blijf hier totdat jij komt.", logic: "Totdat kicker.", formula: "Main + totdat + Subj + Verb", words: ["Ik", "blijf", "hier", "totdat", "jij", "komt."], verb: ["komen", "to come", "kwam"] },
    { diff: 'hard', eng: "We are happy because we are free.", dut: "Wij zijn blij omdat wij vrij zijn.", logic: "Omdat kicker.", formula: "Main + omdat + Subj + Adj + Verb", words: ["Wij", "zijn", "blij", "omdat", "wij", "vrij", "zijn."], verb: ["zijn", "to be", "waren"] },
    { diff: 'hard', eng: "I read a book before I sleep.", dut: "Ik lees een boek voordat ik slaap.", logic: "Voordat kicker.", formula: "Main + voordat + Subj + Verb", words: ["Ik", "lees", "een", "boek", "voordat", "ik", "slaap."], verb: ["slapen", "to sleep", "sliep"] },
    { diff: 'hard', eng: "He drinks water before he runs.", dut: "Hij drinkt water voordat hij rent.", logic: "Voordat kicker.", formula: "Main + voordat + Subj + Verb", words: ["Hij", "drinkt", "water", "voordat", "hij", "rent."], verb: ["rennen", "to run", "rende"] },
    { diff: 'hard', eng: "I listen to music while I work.", dut: "Ik luister naar muziek terwijl ik werk.", logic: "Terwijl kicker.", formula: "Main + terwijl + Subj + Verb", words: ["Ik", "luister", "naar", "muziek", "terwijl", "ik", "werk."], verb: ["werken", "to work", "werkte"] },
    { diff: 'hard', eng: "She studies because she wants to pass.", dut: "Zij studeert omdat zij wil slagen.", logic: "Modal kicker.", formula: "Main + omdat + Subj + Modal + Inf", words: ["Zij", "studeert", "omdat", "zij", "wil", "slagen."], verb: ["slagen", "to pass", "slaagde"] },
    { diff: 'hard', eng: "I am eating because I am hungry.", dut: "Ik eet omdat ik honger heb.", logic: "Omdat kicker with 'hebben'.", formula: "Main + omdat + Subj + Obj + Verb", words: ["Ik", "eet", "omdat", "ik", "honger", "heb."], verb: ["hebben", "to have", "had"] },
    { diff: 'hard', eng: "We are going home now since it's dark.", dut: "Wij gaan nu naar huis omdat het donker is.", logic: "Complex order + kicker.", formula: "Main + omdat + Subj + Adj + Verb", words: ["Wij", "gaan", "nu", "naar", "huis", "omdat", "het", "donker", "is."], verb: ["zijn", "to be", "is"] },
    { diff: 'hard', eng: "I want to see what you are doing.", dut: "Ik wil zien wat jij aan het doen bent.", logic: "Continuous indirect question kicker.", formula: "Subj + Modal + Inf + Question + Subj + aan het + Inf + Verb", words: ["Ik", "wil", "zien", "wat", "jij", "aan", "het", "doen", "bent."], verb: ["doen", "to do", "deed"] },
    { diff: 'hard', eng: "He is happy that the sun is shining.", dut: "Hij is blij dat de zon schijnt.", logic: "Dat-clause kicker.", formula: "Subj + is + Adj + dat + Subj + Verb", words: ["Hij", "is", "blij", "dat", "de", "zon", "schijnt."], verb: ["schijnen", "to shine", "scheen"] },
    { diff: 'hard', eng: "I think that it is a good plan.", dut: "Ik denk dat het een goed plan is.", logic: "Dat-clause kicker.", formula: "Subj + Verb + dat + Subj + Obj + Verb", words: ["Ik", "denk", "dat", "het", "een", "goed", "plan", "is."], verb: ["zijn", "to be", "is"] },
    { diff: 'hard', eng: "She hopes that the train is on time.", dut: "Zij hoopt dat de trein op tijd is.", logic: "Dat-clause kicker.", formula: "Subj + Verb + dat + Subj + Time + Verb", words: ["Zij", "hoopt", "dat", "de", "trein", "op", "tijd", "is."], verb: ["zijn", "to be", "is"] },
    { diff: 'hard', eng: "We hope that the weather stays nice.", dut: "Wij hopen dat het weer mooi blijft.", logic: "Dat-clause kicker.", formula: "Subj + Verb + dat + Subj + Adj + Verb", words: ["Wij", "hopen", "dat", "het", "weer", "mooi", "blijft."], verb: ["blijven", "to stay", "bleef"] },
    { diff: 'hard', eng: "I am going out although it is raining.", dut: "Ik ga naar buiten hoewel het regent.", logic: "Hoewel kicker.", formula: "Main + hoewel + Subj + Verb", words: ["Ik", "ga", "naar", "buiten", "hoewel", "het", "regent."], verb: ["regenen", "to rain", "regende"] },
    { diff: 'hard', eng: "I will call you when I arrive.", dut: "Ik bel je als ik aankom.", logic: "Condition/Time kicker.", formula: "Main + als + Subj + Verb", words: ["Ik", "bel", "je", "als", "ik", "aankom."], verb: ["aankomen", "to arrive", "kwam aan"] },
    { diff: 'hard', eng: "I go to bed to sleep.", dut: "Ik ga naar bed om te slapen.", logic: "Purpose structure.", formula: "Main + om + te + Inf", words: ["Ik", "ga", "naar", "bed", "om", "te", "slapen."], verb: ["slapen", "to sleep", "sliep"] }
];
    </script>
    <script>
      
        let currentIdx = 0;
        let results = new Array(100).fill(null);
        let writingMode = false;
        let discoveredVerbs = new Set();

        function toggleSidebar() { document.getElementById('nav-sidebar').classList.toggle('collapsed'); }
        function initNav() {
            const grid = document.getElementById('nav-grid'); grid.innerHTML = "";
            for (let i = 0; i < 100; i++) {
                const item = document.createElement('div');
                item.className = 'nav-item'; item.innerText = i + 1;
                item.id = `nav-${i}`; item.onclick = () => jumpTo(i);
                grid.appendChild(item);
            }
        }
        function jumpTo(idx) { currentIdx = idx; loadQuestion(); }
        
        function loadQuestion() {
            const q = questions[currentIdx] || questions[0];
            document.getElementById('header-progress').innerText = `${currentIdx + 1} of 100`;
            document.getElementById('translation').innerText = `üá¨üáß ${q.eng}`;
            
            // Populate Enhanced Rule Box
            document.getElementById('rule-text').innerText = q.logic || "Standard word order applies.";
            document.getElementById('rule-formula').innerText = q.formula || "Subject + Verb + Rest";
            document.getElementById('rule-example').innerText = q.example ? `Example: ${q.example}` : "";
            document.getElementById('rule-box').style.display = 'none';
            
            document.getElementById('feedback').innerText = "";
            document.getElementById('writing-input').value = "";
            const label = document.getElementById('diff-label');
            label.innerText = q.diff; label.className = `difficulty-badge ${q.diff}`;
            
            const bank = document.getElementById('word-bank');
            const zone = document.getElementById('answer-zone');
            bank.innerHTML = ""; zone.innerHTML = "";
            [...q.words].sort(() => Math.random() - 0.5).forEach(w => {
                let div = document.createElement('div');
                div.className = 'word'; div.innerText = w;
                div.onclick = () => zone.appendChild(div);
                bank.appendChild(div);
            });
            updateNavStyles();
        }

        function toggleMode() {
            writingMode = !writingMode;
            document.getElementById('mode-text').innerText = writingMode ? "Writing" : "Blocks";
            document.getElementById('block-area').style.display = writingMode ? "none" : "block";
            document.getElementById('writing-input').style.display = writingMode ? "block" : "none";
        }

        function checkAnswer() {
            const q = questions[currentIdx];
            let userStr = writingMode ? document.getElementById('writing-input').value : 
                Array.from(document.getElementById('answer-zone').children).map(c => c.innerText).join(" ");
            const isCorrect = userStr.toLowerCase().replace(/[.,?]/g, "").trim() === q.dut.toLowerCase().replace(/[.,?]/g, "").trim();
            const fb = document.getElementById('feedback');
            if (isCorrect) {
                fb.innerText = "‚úÖ Correct! Goed gedaan!"; fb.style.color = "green";
                results[currentIdx] = true; if(q.verb) addVerb(q.verb);
            } else {
                fb.innerText = "‚ùå Incorrect. Try again!"; fb.style.color = "red";
                results[currentIdx] = false;
            }
            updateNavStyles();
        }

        function addVerb(v) {
            if(!discoveredVerbs.has(v[0])) {
                discoveredVerbs.add(v[0]);
                document.getElementById('verb-list').innerHTML += `<tr><td>${v[0]}</td><td>${v[1]}</td><td>${v[2]}</td></tr>`;
            }
        }

        function returnToBank(e) { if(e.target.className === 'word') document.getElementById('word-bank').appendChild(e.target); }
        function toggleRule() { const b = document.getElementById('rule-box'); b.style.display = b.style.display === 'none' ? 'block' : 'none'; }
        function next() { currentIdx = (currentIdx + 1) % 100; loadQuestion(); }
        function prev() { currentIdx = (currentIdx - 1 + 100) % 100; loadQuestion(); }
        function updateNavStyles() {
            for (let i = 0; i < 100; i++) {
                const item = document.getElementById(`nav-${i}`);
                if(!item) continue;
                item.classList.remove('active', 'is-correct', 'is-wrong');
                if(i === currentIdx) item.classList.add('active');
                if(results[i] === true) item.classList.add('is-correct');
                if(results[i] === false) item.classList.add('is-wrong');
            }
        }
        initNav(); loadQuestion();
    </script>
	
</body>
</html>
