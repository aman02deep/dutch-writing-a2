<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <title>Inburgering A2 Mastery - Enhanced Rules</title>
    <style>
        :root { --primary: #0052cc; --danger: #d92626; --easy: #2e7d32; --med: #ef6c00; --hard: #c62828; }
        body { font-family: 'Segoe UI', sans-serif; background-color: #f0f2f5; margin: 0; display: flex; height: 100vh; overflow: hidden; }

        /* Left Sidebar */
        #nav-sidebar { width: 220px; background: white; border-right: 1px solid #ddd; display: flex; flex-direction: column; transition: 0.3s; z-index: 10; }
        #nav-sidebar.collapsed { width: 0; overflow: hidden; border: none; }
        .jump-links { padding: 15px; display: flex; flex-direction: column; gap: 8px; border-bottom: 1px solid #eee; }
        .jump-btn { padding: 8px; border: none; border-radius: 4px; font-size: 0.75rem; cursor: pointer; font-weight: bold; color: white; }
        .btn-e { background: var(--easy); } .btn-m { background: var(--med); } .btn-h { background: var(--hard); }
        .scroll-area { flex-grow: 1; overflow-y: auto; padding: 10px; }
        .nav-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 6px; }
        .nav-item { padding: 10px 0; text-align: center; border: 1px solid #ddd; border-radius: 6px; cursor: pointer; font-size: 0.8rem; background: #fff; }
        .nav-item.active { border: 2px solid var(--primary); font-weight: bold; }
        .nav-item.is-correct { background: #c8e6c9; border-color: #2e7d32; }
        .nav-item.is-wrong { background: #ffcdd2; border-color: #c62828; }

        /* Main Area */
        .workspace { flex-grow: 1; display: flex; flex-direction: column; overflow: hidden; }
        .top-bar { padding: 12px 20px; background: white; border-bottom: 1px solid #ddd; display: flex; align-items: center; justify-content: space-between; }
        .top-left { display: flex; align-items: center; gap: 15px; }
        .top-right { display: flex; align-items: center; gap: 10px; }

        .difficulty-badge { padding: 4px 12px; border-radius: 15px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; }
        .easy { background: #e8f5e9; color: var(--easy); }
        .medium { background: #fff3e0; color: var(--med); }
        .hard { background: #ffebee; color: var(--hard); }

        .app-content { display: flex; gap: 20px; padding: 30px; overflow-y: auto; justify-content: center; }
        .app-container { background: white; width: 100%; max-width: 800px; padding: 40px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border-top: 8px solid var(--danger); height: fit-content; }
        
        .translation { font-size: 1.6rem; font-weight: bold; color: #1a1a1a; text-align: center; margin-bottom: 30px; line-height: 1.4; }
        .drop-zone { min-height: 80px; border: 2px dashed var(--primary); border-radius: 10px; display: flex; flex-wrap: wrap; gap: 10px; padding: 15px; background: #f9fbff; margin-bottom: 20px; }
        .word-bank { display: flex; flex-wrap: wrap; justify-content: center; gap: 10px; margin-bottom: 30px; }
        .word { padding: 12px 18px; background: white; border: 2px solid var(--primary); color: var(--primary); border-radius: 6px; cursor: pointer; font-weight: 600; box-shadow: 0 2px 4px rgba(0,0,0,0.05); }
        #writing-input { width: 100%; padding: 15px; font-size: 1.2rem; border: 2px solid #ccc; border-radius: 8px; display: none; margin-bottom: 30px; box-sizing: border-box; }

        /* Rule Box Enhancement */
        #rule-box { 
            display: none; 
            padding: 20px; 
            background: #fff9c4; 
            border-left: 6px solid #fbc02d; 
            margin-bottom: 25px; 
            font-size: 0.95rem; 
            border-radius: 4px;
            color: #444;
        }
        .rule-title { font-weight: bold; color: #856404; margin-bottom: 8px; display: block; text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.5px;}
        .rule-formula { background: rgba(255,255,255,0.5); padding: 8px; border-radius: 4px; font-family: monospace; display: block; margin: 10px 0; color: #000; font-size: 1rem; }
        .rule-example { font-style: italic; color: #555; border-top: 1px solid rgba(0,0,0,0.05); padding-top: 8px; display: block; }

        .vocab-sidebar { width: 300px; background: #333; color: white; padding: 20px; border-radius: 12px; height: fit-content; max-height: 80vh; overflow-y: auto; }
        table { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
        th, td { text-align: left; padding: 10px; border-bottom: 1px solid #555; }
        
        .btn-main { padding: 15px; background: var(--danger); color: white; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; font-size: 1rem; }
        .btn-sec { padding: 8px 15px; background: #666; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 0.85rem; }
        .btn-rule-toggle { background: var(--primary); color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; font-size: 0.85rem; font-weight: bold; }
    </style>
</head>
<body>

    <aside id="nav-sidebar">
        <div class="jump-links">
            <button class="jump-btn btn-e" onclick="jumpTo(0)">üü¢ Start Easy</button>
            <button class="jump-btn btn-m" onclick="jumpTo(30)">üü† Start Medium</button>
            <button class="jump-btn btn-h" onclick="jumpTo(60)">üî¥ Start Hard</button>
        </div>
        <div class="scroll-area"><div class="nav-grid" id="nav-grid"></div></div>
    </aside>

    <main class="workspace">
        <div class="top-bar">
            <div class="top-left">
                <button class="btn-sec" onclick="toggleSidebar()">‚ò∞ List</button>
                <div id="diff-label" class="difficulty-badge easy">Easy</div>
                <div id="header-progress" style="font-weight: bold; color: #555;">1 of 100</div>
            </div>
            <div class="top-right">
                <button class="btn-rule-toggle" onclick="toggleRule()">View Rule</button>
                <button class="btn-sec" onclick="toggleMode()">Mode: <span id="mode-text">Blocks</span></button>
            </div>
        </div>

        <div class="app-content">
            <div class="app-container">
                <div class="translation" id="translation">Loading...</div>
                
                <div id="block-area">
                    <div class="drop-zone" id="answer-zone" onclick="returnToBank(event)"></div>
                    <div class="word-bank" id="word-bank"></div>
                </div>
                <input type="text" id="writing-input" placeholder="Typ de Nederlandse zin hier...">

                <div id="rule-box">
                    <span class="rule-title">Grammar Logic</span>
                    <div id="rule-text"></div>
                    <div class="rule-formula" id="rule-formula"></div>
                    <div class="rule-example" id="rule-example"></div>
                </div>

                <div id="feedback" style="text-align:center; font-weight:bold; height:24px; margin-bottom:15px;"></div>

                <div style="display:flex; flex-direction:column; gap:12px;">
                    <button class="btn-main" onclick="checkAnswer()">Check Answer</button>
                    <div style="display:flex; gap:10px;">
                        <button class="btn-sec" style="flex:1" onclick="prev()">Previous</button>
                        <button class="btn-sec" style="flex:1" onclick="next()">Next</button>
                    </div>
                </div>
            </div>

            <div class="vocab-sidebar">
                <h4 style="margin-top:0; border-bottom: 1px solid #666; padding-bottom: 10px;">Verb Library</h4>
                <table>
                    <thead><tr><th>Dutch</th><th>English</th><th>Past Form</th></tr></thead>
                    <tbody id="verb-list"></tbody>
                </table>
            </div>
        </div>
    </main>

	<script src="questions-set-1.js"></script>
	
    <script>
      
        let currentIdx = 0;
        let results = new Array(100).fill(null);
        let writingMode = false;
        let discoveredVerbs = new Set();

        function toggleSidebar() { document.getElementById('nav-sidebar').classList.toggle('collapsed'); }
        function initNav() {
            const grid = document.getElementById('nav-grid'); grid.innerHTML = "";
            for (let i = 0; i < 100; i++) {
                const item = document.createElement('div');
                item.className = 'nav-item'; item.innerText = i + 1;
                item.id = `nav-${i}`; item.onclick = () => jumpTo(i);
                grid.appendChild(item);
            }
        }
        function jumpTo(idx) { currentIdx = idx; loadQuestion(); }
        
        function loadQuestion() {
            const q = questions[currentIdx] || questions[0];
            document.getElementById('header-progress').innerText = `${currentIdx + 1} of 100`;
            document.getElementById('translation').innerText = `üá¨üáß ${q.eng}`;
            
            // Populate Enhanced Rule Box
            document.getElementById('rule-text').innerText = q.logic || "Standard word order applies.";
            document.getElementById('rule-formula').innerText = q.formula || "Subject + Verb + Rest";
            document.getElementById('rule-example').innerText = q.example ? `Example: ${q.example}` : "";
            document.getElementById('rule-box').style.display = 'none';
            
            document.getElementById('feedback').innerText = "";
            document.getElementById('writing-input').value = "";
            const label = document.getElementById('diff-label');
            label.innerText = q.diff; label.className = `difficulty-badge ${q.diff}`;
            
            const bank = document.getElementById('word-bank');
            const zone = document.getElementById('answer-zone');
            bank.innerHTML = ""; zone.innerHTML = "";
            [...q.words].sort(() => Math.random() - 0.5).forEach(w => {
                let div = document.createElement('div');
                div.className = 'word'; div.innerText = w;
                div.onclick = () => zone.appendChild(div);
                bank.appendChild(div);
            });
            updateNavStyles();
        }

        function toggleMode() {
            writingMode = !writingMode;
            document.getElementById('mode-text').innerText = writingMode ? "Writing" : "Blocks";
            document.getElementById('block-area').style.display = writingMode ? "none" : "block";
            document.getElementById('writing-input').style.display = writingMode ? "block" : "none";
        }

        function checkAnswer() {
            const q = questions[currentIdx];
            let userStr = writingMode ? document.getElementById('writing-input').value : 
                Array.from(document.getElementById('answer-zone').children).map(c => c.innerText).join(" ");
            const isCorrect = userStr.toLowerCase().replace(/[.,?]/g, "").trim() === q.dut.toLowerCase().replace(/[.,?]/g, "").trim();
            const fb = document.getElementById('feedback');
            if (isCorrect) {
                fb.innerText = "‚úÖ Correct! Goed gedaan!"; fb.style.color = "green";
                results[currentIdx] = true; if(q.verb) addVerb(q.verb);
            } else {
                fb.innerText = "‚ùå Incorrect. Try again!"; fb.style.color = "red";
                results[currentIdx] = false;
            }
            updateNavStyles();
        }

        function addVerb(v) {
            if(!discoveredVerbs.has(v[0])) {
                discoveredVerbs.add(v[0]);
                document.getElementById('verb-list').innerHTML += `<tr><td>${v[0]}</td><td>${v[1]}</td><td>${v[2]}</td></tr>`;
            }
        }

        function returnToBank(e) { if(e.target.className === 'word') document.getElementById('word-bank').appendChild(e.target); }
        function toggleRule() { const b = document.getElementById('rule-box'); b.style.display = b.style.display === 'none' ? 'block' : 'none'; }
        function next() { currentIdx = (currentIdx + 1) % 100; loadQuestion(); }
        function prev() { currentIdx = (currentIdx - 1 + 100) % 100; loadQuestion(); }
        function updateNavStyles() {
            for (let i = 0; i < 100; i++) {
                const item = document.getElementById(`nav-${i}`);
                if(!item) continue;
                item.classList.remove('active', 'is-correct', 'is-wrong');
                if(i === currentIdx) item.classList.add('active');
                if(results[i] === true) item.classList.add('is-correct');
                if(results[i] === false) item.classList.add('is-wrong');
            }
        }
        initNav(); loadQuestion();
    </script>
	
</body>
</html>
